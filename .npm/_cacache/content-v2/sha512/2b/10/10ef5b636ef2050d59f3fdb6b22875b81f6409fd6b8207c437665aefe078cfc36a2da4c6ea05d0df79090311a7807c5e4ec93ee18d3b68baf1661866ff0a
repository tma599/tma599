{"_id":"passport-discord","_rev":"12-2a96ffbcee40b0797dc90ec3c50fb46a","name":"passport-discord","time":{"modified":"2022-06-23T12:29:33.387Z","created":"2016-03-12T01:36:21.130Z","0.1.0":"2016-03-12T01:36:21.130Z","0.1.1":"2016-03-12T01:40:00.326Z","0.1.2":"2017-02-28T09:09:45.169Z","0.1.3":"2017-10-23T09:01:22.891Z","0.1.4":"2020-06-04T02:36:30.528Z"},"maintainers":[{"name":"nicholastay","email":"nexerq@gmail.com"}],"dist-tags":{"latest":"0.1.4"},"description":"Passport strategy for authentication with Discord (discordapp.com)","readme":"# passport-discord\n\n**Notice**: I'm no longer too active with the Discord API, and only tinker around occasionally. So, if there is anybody who would like to be more active in maintaining, I'm happy to link to your fork as the new solution to use or give project permissions on this repo.\n\nPassport strategy for authentication with [Discord](http://discordapp.com) through the OAuth 2.0 API.\n\nBefore using this strategy, it is strongly recommended that you read through the official docs page [here](https://discord.com/developers/docs/topics/oauth2), especially about the scopes and understand how the auth works.\n\n## Usage\n`npm install passport-discord --save`\n\n#### Configure Strategy\nThe Discord authentication strategy authenticates users via a Discord user account and OAuth 2.0 token(s). A Discord API client ID, secret and redirect URL must be supplied when using this strategy. The strategy also requires a `verify` callback, which receives the access token and an optional refresh token, as well as a `profile` which contains the authenticated Discord user's profile. The `verify` callback must also call `cb` providing a user to complete the authentication.\n\n```javascript\nvar DiscordStrategy = require('passport-discord').Strategy;\n\nvar scopes = ['identify', 'email', 'guilds', 'guilds.join'];\n\npassport.use(new DiscordStrategy({\n    clientID: 'id',\n    clientSecret: 'secret',\n    callbackURL: 'callbackURL',\n    scope: scopes\n},\nfunction(accessToken, refreshToken, profile, cb) {\n    User.findOrCreate({ discordId: profile.id }, function(err, user) {\n        return cb(err, user);\n    });\n}));\n```\n\n#### Authentication Requests\nUse `passport.authenticate()`, and specify the `'discord'` strategy to authenticate requests.\n\nFor example, as a route middleware in an Express app:\n\n```javascript\napp.get('/auth/discord', passport.authenticate('discord'));\napp.get('/auth/discord/callback', passport.authenticate('discord', {\n    failureRedirect: '/'\n}), function(req, res) {\n    res.redirect('/secretstuff') // Successful auth\n});\n```\n\nIf using the `bot` scope, the `permissions` option can be set to indicate\nspecific permissions your bot needs on the server ([permission codes](https://discordapp.com/developers/docs/topics/permissions)):\n\n```javascript\napp.get(\"/auth/discord\", passport.authenticate(\"discord\", { permissions: 66321471 }));\n```\n\n#### Refresh Token Usage\nIn some use cases where the profile may be fetched more than once or you want to keep the user authenticated, refresh tokens may wish to be used. A package such as `passport-oauth2-refresh` can assist in doing this.\n\nExample:\n\n`npm install passport-oauth2-refresh --save`\n\n```javascript\nvar DiscordStrategy = require('passport-discord').Strategy\n  , refresh = require('passport-oauth2-refresh');\n\nvar discordStrat = new DiscordStrategy({\n    clientID: 'id',\n    clientSecret: 'secret',\n    callbackURL: 'callbackURL'\n},\nfunction(accessToken, refreshToken, profile, cb) {\n    profile.refreshToken = refreshToken; // store this for later refreshes\n    User.findOrCreate({ discordId: profile.id }, function(err, user) {\n        if (err)\n            return done(err);\n\n        return cb(err, user);\n    });\n});\n\npassport.use(discordStrat);\nrefresh.use(discordStrat);\n```\n\n... then if we require refreshing when fetching an update or something ...\n\n```javascript\nrefresh.requestNewAccessToken('discord', profile.refreshToken, function(err, accessToken, refreshToken) {\n    if (err)\n        throw; // boys, we have an error here.\n    \n    profile.accessToken = accessToken; // store this new one for our new requests!\n});\n```\n\n\n## Examples\nAn Express server example can be found in the `/example` directory. Be sure to `npm install` in that directory to get the dependencies.\n\n## Credits\n* Jared Hanson - used passport-github to understand passport more and kind of as a base.\n\n## License\nLicensed under the ISC license. The full license text can be found in the root of the project repository.\n","versions":{"0.1.1":{"name":"passport-discord","version":"0.1.1","description":"Passport strategy for authentication with Discord (discordapp.com)","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/nicholastay/passport-discord.git"},"keywords":["passport","discord","auth","authentication","authn","identity"],"author":{"name":"Nicholas Tay","email":"nexerq@gmail.com","url":"http://nicholastay.github.io"},"license":"ISC","bugs":{"url":"https://github.com/nicholastay/passport-discord/issues"},"homepage":"https://github.com/nicholastay/passport-discord#readme","dependencies":{"passport-oauth2":"^1.2.0"},"gitHead":"d5260ed0e22f0e107eacc1a6377dc6c2424383b0","_id":"passport-discord@0.1.1","scripts":{},"_shasum":"0a880df3f755ed810be878867adccfaebc3419ff","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.4.1","_npmUser":{"name":"nicholastay","email":"nexerq@gmail.com"},"dist":{"shasum":"0a880df3f755ed810be878867adccfaebc3419ff","tarball":"https://registry.npmjs.org/passport-discord/-/passport-discord-0.1.1.tgz","integrity":"sha512-tw3UsYKNEHk1jnyfIO9O/yuueNAUYdpsk+HUgQTZfjwJL9gboYmYlLCBGv46bP4xbYrF+SC8hdMVhfYmxM5QkA==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCICCn7noXKybNtEe9e71suHg2m0caZJ2Da3vHj6oaTXvdAiEAqMNwcGmlF/Rj98c6bg0kGk3FyqnhaQ3TU3gHsEL8Yng="}]},"maintainers":[{"name":"nicholastay","email":"nexerq@gmail.com"}],"_npmOperationalInternal":{"host":"packages-13-west.internal.npmjs.com","tmp":"tmp/passport-discord-0.1.1.tgz_1457746799721_0.6812531792093068"},"directories":{}},"0.1.2":{"name":"passport-discord","version":"0.1.2","description":"Passport strategy for authentication with Discord (discordapp.com)","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/nicholastay/passport-discord.git"},"keywords":["passport","discord","auth","authentication","authn","identity"],"author":{"name":"Nicholas Tay","email":"nexerq@gmail.com","url":"http://nicholastay.github.io"},"license":"ISC","bugs":{"url":"https://github.com/nicholastay/passport-discord/issues"},"homepage":"https://github.com/nicholastay/passport-discord#readme","dependencies":{"passport-oauth2":"^1.2.0"},"gitHead":"38e864f50d5dbe89600d148d571d221aea511ca3","_id":"passport-discord@0.1.2","scripts":{},"_shasum":"5b893a2007603c6c82ec824e67a35a4628d47955","_from":".","_npmVersion":"3.3.12","_nodeVersion":"5.4.1","_npmUser":{"name":"nicholastay","email":"nexerq@gmail.com"},"dist":{"shasum":"5b893a2007603c6c82ec824e67a35a4628d47955","tarball":"https://registry.npmjs.org/passport-discord/-/passport-discord-0.1.2.tgz","integrity":"sha512-8xciKeUJkUTUarADgk6O9piTa2yYpN2LGFOND/yEH9OcG+9Cve6ItyplC7LUCnzmpGaTHR2//zsnTgwZoV29tQ==","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIDlfeyPcf0CCKtODZuV7lVcKAAZDuPMSujpYjKEpJz7qAiEAo56UY0H58U/StCH2MRw6DDcgyEEKEBkEsT3weVB+sCI="}]},"maintainers":[{"name":"nicholastay","email":"nexerq@gmail.com"}],"_npmOperationalInternal":{"host":"packages-12-west.internal.npmjs.com","tmp":"tmp/passport-discord-0.1.2.tgz_1488272984946_0.5850411595311016"},"directories":{}},"0.1.3":{"name":"passport-discord","version":"0.1.3","description":"Passport strategy for authentication with Discord (discordapp.com)","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/nicholastay/passport-discord.git"},"keywords":["passport","discord","auth","authentication","authn","identity"],"author":{"name":"Nicholas Tay","email":"nexerq@gmail.com","url":"http://nicholastay.github.io"},"license":"ISC","bugs":{"url":"https://github.com/nicholastay/passport-discord/issues"},"homepage":"https://github.com/nicholastay/passport-discord#readme","dependencies":{"passport-oauth2":"^1.2.0"},"gitHead":"2d3b922d2aebfe91042a9283ace0834d51a9dded","_id":"passport-discord@0.1.3","_npmVersion":"5.3.0","_nodeVersion":"8.2.1","_npmUser":{"name":"nicholastay","email":"nexerq@gmail.com"},"dist":{"integrity":"sha512-o8+KiQrV63DCJvYVceyVJgyFhHxqOPlcxaiB8Hlrrm0uq83KfQOMPUcXal0pao5Qx8ZeOH/RBJEbJV9aB0F/hw==","shasum":"669cc4a770b592f57eb17002ca1743a22e8d7c38","tarball":"https://registry.npmjs.org/passport-discord/-/passport-discord-0.1.3.tgz","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEUCIQD6B2k8JJMHxqpRz/7cuRappWK5gn+4pAigzNNIKWlLOwIgW4uS/F3apGIpNuayA2ePEuUGciUum/EdxPrGVP8zNdU="}]},"maintainers":[{"name":"nicholastay","email":"nexerq@gmail.com"}],"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/passport-discord-0.1.3.tgz_1508749282731_0.9152779115829617"},"directories":{}},"0.1.4":{"name":"passport-discord","version":"0.1.4","description":"Passport strategy for authentication with Discord (discordapp.com)","main":"lib/index.js","repository":{"type":"git","url":"git+https://github.com/nicholastay/passport-discord.git"},"keywords":["passport","discord","auth","authentication","authn","identity"],"author":{"name":"Nicholas Tay","email":"nexerq@gmail.com","url":"http://nicholastay.github.io"},"license":"ISC","bugs":{"url":"https://github.com/nicholastay/passport-discord/issues"},"homepage":"https://github.com/nicholastay/passport-discord#readme","dependencies":{"passport-oauth2":"^1.5.0"},"gitHead":"9c1dc7232f7d25e0bd65da6b5e4544fa11dd86af","_id":"passport-discord@0.1.4","_nodeVersion":"12.14.0","_npmVersion":"6.13.4","dist":{"integrity":"sha512-VJWPYqSOmh7SaCLw/C+k1ZqCzJnn2frrmQRx1YrcPJ3MQ+Oa31XclbbmqFICSvl8xv3Fqd6YWQ4H4p1MpIN9rA==","shasum":"9265be11952cdd54d77c47eaae352834444cf0f6","tarball":"https://registry.npmjs.org/passport-discord/-/passport-discord-0.1.4.tgz","fileCount":7,"unpackedSize":12641,"npm-signature":"-----BEGIN PGP SIGNATURE-----\r\nVersion: OpenPGP.js v3.0.4\r\nComment: https://openpgpjs.org\r\n\r\nwsFcBAEBCAAQBQJe2F4uCRA9TVsSAnZWagAAC/sP/38pIEpkHGz35OLPiyf4\nJcxBVERUXejB2hB+a5j/W9AU2jd9Q3kRxpwP/PC731x9dLdYvLcA7FcDuFyN\nv6X/M53b4X+4N57N6G4wsgEwnCIS8JkujDgN56nQUUiHmjVKFjTWfhkXQ/p0\nQUVevvSH4VJeipm4RYYunzVXVWrfUn2V2xc2iZYNpG8dh+2H/9hVxwINKF6l\nvK/0x1wHUwN9r4muEorI99uzPL19KD6OtQuqh9icj5kwrYMEllfzKrveb4BP\nYqJB9X6A0lVbzg6z+4tbBOmo54/G8OJFXawxAWNYEtKwGpcRKc6bIXtaHyH+\nRY0XB4shUm3JwTP4m9QbV6y8wA1/bgUcJydTyhob33pp4QVzO/GSDt8uI037\nMz0PFSY55W2N3fm4mHEEDsxuhJiRJC0ErSm0fHKL+gcIPPRdoWknFWUEytSH\nbYeIHAWGHv16WkZz760811I5BJgvLgeAB/JzOWu9L56bLXkxc0wfwJf3apUU\nqRPdNnuvSze32t8RnBzFCnN6Fa82r9F/9WZoQWMoEXkhOKYejRvdB25hXwzs\nRnWggm1t0Oc/DiD+eVD1pwVf1MK2RMo5a9angoh2npSCKq/AFuX/OiBUPyLx\nfm7pZSXiYsPBrovAKSYySBdnzEFB5Gt9zvAaJh9sFN2WbsZuVVTBibuFEu1D\nOcZ/\r\n=2glv\r\n-----END PGP SIGNATURE-----\r\n","signatures":[{"keyid":"SHA256:jl3bwswu80PjjokCgh0o2w5c2U4LhQAE57gj9cz1kzA","sig":"MEQCIDr6gRFenR2fFEZlNcb4IFbhjOEmYfWkwfwGJtQvFProAiABuSRUiCpXAdaPDyDgA/G0fZsPJ9dYwgsTTN1KXled5g=="}]},"maintainers":[{"name":"nicholastay","email":"nexerq@gmail.com"}],"_npmUser":{"name":"nicholastay","email":"nexerq@gmail.com"},"directories":{},"_npmOperationalInternal":{"host":"s3://npm-registry-packages","tmp":"tmp/passport-discord_0.1.4_1591238190284_0.32235347100603784"},"_hasShrinkwrap":false}},"homepage":"https://github.com/nicholastay/passport-discord#readme","keywords":["passport","discord","auth","authentication","authn","identity"],"repository":{"type":"git","url":"git+https://github.com/nicholastay/passport-discord.git"},"author":{"name":"Nicholas Tay","email":"nexerq@gmail.com","url":"http://nicholastay.github.io"},"bugs":{"url":"https://github.com/nicholastay/passport-discord/issues"},"license":"ISC","readmeFilename":"README.md","users":{"rocket0191":true}}